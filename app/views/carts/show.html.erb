<style>
  .container {
    max-width: 70rem;
  }
</style>

<div class="container">

  <div class="row mt-3">

    <div class="col-lg-4 order-lg-1">
      <div class="card mb-3">
        <div class="card-body">
          <div class="mb-2">
            <dl class="row">
              <dt class="col-7">Subtotal (<%= @cart.number_of_items %> items):</dt>
              <dd class="col-5 text-right"><%= number_to_currency_gh dollar_to_cedi @cart.subtotal %></dd>
            </dl>
          </div>

          <%= link_to 'Checkout', new_order_path, class: 'btn btn-block btn-accent' %>
        </div>
      </div>
    </div>

    <div class="col-lg-8">
      <ul class="list-group mb-4">
        <% @cart.cart_items.each do |cart_item| %>
          <li class="list-group-item d-flex flex-column w-100 justify-content-start px-2">
            <a href="<%= product_path cart_item.product %>">
              <div class="d-flex w-100 justify-content-start mb-2">
                <img class="product-image mr-3" src="<%= cart_item.product.main_image %>" width="100" style="height: 100px">
                <div>
                  <h6 class="mb-1"><%= truncate cart_item.product.title, length: 60 %></h6>

                  <div class="text-danger ml-auto"><%= number_to_currency_gh dollar_to_cedi cart_item.product.default_price %></div>
                </div>
              </div>
            </a>


            <div class="d-flex w-100 justify-content-end">
              <%= form_with(model: cart_item, local: false, class: 'form-inline') do |form| %>
                <%= form.select :quantity,
                                choices = (1..50).map { |w| [w, w] },
                                options = {
                                    include_blank: false
                                },
                                html_options = {
                                    class: "form-control form-control-sm ml-2",
                                    onchange: 'this.form.submit();'
                                } %>
              <% end %>
              <%= button_to "Remove", cart_item_path(cart_item), method: :delete, class: 'btn btn-sm btn-secondary ml-2' %>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
  </div>

</div>