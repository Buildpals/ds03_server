<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://res.cloudinary.com/tenderswift/image/upload/c_scale,h_32/v1564315094/ProcureSwiftLogos/procureswift-square.png"
        rel="icon">

  <title>ProcureSwift</title>

  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= javascript_include_tag '/main.js', 'data-turbolinks-track': 'reload' %>

  <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous" defer></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js" defer></script>
  <script type="text/javascript" charset="utf-8" defer>
      document.addEventListener("turbolinks:load", function() {
          $('#products_table').DataTable({
              paging: false,
              fixedHeader: true
          });
      });
  </script>

  <% if Rails.env.production? %>
    <script>
        window['_fs_debug'] = false
        window['_fs_host'] = 'fullstory.com'
        window['_fs_org'] = '8ECWC'
        window['_fs_namespace'] = 'FS';
        (function (m, n, e, t, l, o, g, y) {
            if (e in m) {
                if (m.console && m.console.log) {
                    m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].')
                }
                return
            }
            g = m[e] = function (a, b, s) {
                g.q ? g.q.push([a, b, s]) : g._api(a, b, s)
            }
            g.q = []
            o = n.createElement(t)
            o.async = 1
            o.src = 'https://' + _fs_host + '/s/fs.js'
            y = n.getElementsByTagName(t)[0]
            y.parentNode.insertBefore(o, y)
            g.identify = function (i, v, s) {
                g(l, {uid: i}, s)
                if (v) g(l, v, s)
            }
            g.setUserVars = function (v, s) {
                g(l, v, s)
            }
            g.event = function (i, v, s) {
                g('event', {n: i, p: v}, s)
            }
            g.shutdown = function () {
                g('rec', !1)
            }
            g.restart = function () {
                g('rec', !0)
            }
            g.consent = function (a) {
                g('consent', !arguments.length || a)
            }
            g.identifyAccount = function (i, v) {
                o = 'account'
                v = v || {}
                v.acctId = i
                g(o, v)
            }
            g.clearUserCookie = function () {
            }
        })(window, document, window['_fs_namespace'], 'script', 'user')
    </script>
  <% end %>

  <!-- Facebook Pixel Code -->
  <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
          n.callMethod.apply(n,arguments):n.queue.push(arguments)};
          if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
          n.queue=[];t=b.createElement(e);t.async=!0;
          t.src=v;s=b.getElementsByTagName(e)[0];
          s.parentNode.insertBefore(t,s)}(window, document,'script',
          'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '468824533768359');
      fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
                 src="https://www.facebook.com/tr?id=468824533768359&ev=PageView&noscript=1"
    /></noscript>
  <!-- End Facebook Pixel Code -->
</head>

<body class="d-flex flex-column" style="min-height: 100vh;">
<!-- Just an image -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container">
    <a class="navbar-brand" href="<%= root_path %>">
      <%= image_tag "/img/Procurewift-17.png", height: "60", alt: "" %>
    </a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <% if current_user&.admin? %>
          <li class="nav-item">
            <a class="nav-link" href="<%= admin_orders_path %>">All Orders</a>
          </li>
        <% end %>
        <% if user_signed_in? && controller_name != 'welcome' %>
          <li class="nav-item">
            <a class="nav-link" href="#" data-toggle="modal" data-target="#getShippingCostModal">Purchase new item</a>
          </li>
        <% end %>
      </ul>

      <ul class="navbar-nav ml-auto">
        <% if user_signed_in? %>
          <li class="nav-item">
            <a class="nav-link" href="<%= orders_path %>">My Orders</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <%= current_user.full_name %>
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <%= link_to current_user.email, edit_user_registration_path, class: 'dropdown-item' %>
              <div class="dropdown-divider"></div>
              <%= link_to('Logout', destroy_user_session_path, method: :delete, class: "dropdown-item") %>
            </div>
          </li>
        <% else %>
          <li class="nav-item">
            <%= link_to 'Login', new_user_session_path, class: 'nav-link' %>
          </li>
          <li class="nav-item">
            <%= link_to 'Signup', new_user_registration_path, class: 'nav-link' %>
          </li>
        <% end %>
      </ul>
    </div>

  </div>
</nav>

<section class="container">
  <% if notice %>
    <div class="alert alert-info mt-3" role="alert">
      <%= notice %>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  <% end %>

  <% if alert %>
    <div class="alert alert-danger mt-3" role="alert">
      <%= alert %>
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  <% end %>
</section>


<%= yield %>


<!-- Footer -->
<%= render :partial => 'application/footer' %>
</body>
</html>
